{{!< default}}
{{!-- 
/**
 * Uncertainty Project
 * Developed by Engagement Lab, 2016
 * ==============
 * 
 * Script include for global logic
 * ==========
 */
--}}

<script type="text/javascript">

	// var timeline = new TimelineMax();
	$(document).ready(function() {

		// Menu toggling
	  $("#menu-close").click(function(e) {
	    e.preventDefault();
	    $("#sidebar-wrapper").toggleClass("active");
	  });
	  $("#menu-toggle").click(function(e) {
	    e.preventDefault();
	    $("#sidebar-wrapper").toggleClass("active");
	  });

	  // Blurring/no blur
	  $('.category').hover(
	  	function () {
		    $(this).children('.bg').removeClass("blur");
		    $(this).children('.content').addClass("transparent");
		  },
		  function () {
		    $(this).children('.bg').addClass("blur");
		    $(this).children('.content').removeClass("transparent");
		  }
	  );

/*	  var timeline = new TimelineMax({repeat:-1, yoyo:true, paused: true, onUpdateParams:['{self}'], onUpdate:applyBlur});
		var blurElement = {a:0};//start the blur at 0 pixels

		timeline.to({}, 5);

		//here you pass the filter to the DOM element
		function applyBlur(tl)
		{
				 var tlp = (tl.progress()*100)>>0;
		    timeline.set($('#blurred'), {webkitFilter:"blur(" + tlp + "px)",filter:"blur(" + tlp + "px)"});  
		};
		timeline.play();*/
		var timeline = TweenMax.to({}, 5, 
		{
			repeat: -1,
			yoyo: true,
			onRepeat:function(){
				timeline.duration(Math.floor(Math.random() * (10 - 1 + 1)) + 1)
			},
		  onUpdateParams:["{self}"],
		  onUpdate:function(tl){

		    var tlp = (tl.progress()*9);
		    TweenMax.set('#blurred',{'-webkit-filter':'blur(' + tlp + 'px' + ')','filter':'blur(' + tlp + 'px' + ')'});
		  }
		});

	});
	
</script>